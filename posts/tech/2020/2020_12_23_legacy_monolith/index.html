<!doctype html><html><head><title>What to do with your legacy monolith</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600"><link rel=stylesheet href=/fontawesome/css/all.min.css><link rel=icon type=image/png href=/images/mjn-logo_huc94cd2164fb0a8cc0029e94778229d7b_288620_42x0_resize_box_3.png><meta property="og:title" content="What to do with your legacy monolith"><meta property="og:description" content="Do you have a"><meta property="og:type" content="article"><meta property="og:url" content="https://michjnich.github.io/posts/tech/2020/2020_12_23_legacy_monolith/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-12-23T08:00:00+01:00"><meta property="article:modified_time" content="2020-12-23T08:00:00+01:00"><meta name=description content="Do you have a"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/mjn-logo.svg alt=Logo>
Michael J. Nicholson</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/mjn-logo.svg class=d-none id=main-logo alt=Logo>
<img src=/images/mjn-logo_huc94cd2164fb0a8cc0029e94778229d7b_288620_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/tech/>Tech</a><ul class=active><li><i class="fas fa-plus-circle"></i><a href=/posts/tech/2022/>2022</a><ul><li><a href=/posts/tech/2022/2022_04_03_welcome_to_v2/ title="michjnich.com v2">michjnich.com v2</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/tech/2021/>2021</a><ul><li><a href=/posts/tech/2021/2021_02_25_remote_working/ title="Remote working">Remote working</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/tech/2020/>2020</a><ul class=active><li><a class=active href=/posts/tech/2020/2020_12_23_legacy_monolith/ title="Legacy monolith">Legacy monolith</a></li></ul></li></ul></li><li><a href=/posts/writing/ title=Writing>Writing</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://michjnich.github.io/posts/tech/2020/2020_12_23_legacy_monolith/monolith.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/michjnich_hu196abb93d882ab659dc50e489200e798_20228_120x120_fit_q75_box.jpg alt="Author Image"><h5 class=author-name>Michael J. Nicholson</h5><p>Wednesday, December 23, 2020</p></div><div class=title><h1>What to do with your legacy monolith</h1></div><div class=post-content id=post-content><p>This post was <a href=https://www.linkedin.com/pulse/what-do-your-legacy-monolith-michael-nicholson/>originally published on LinkedIn</a></p><p>Are you working at a company that has a legacy monolith that you&rsquo;d like to get rid of?</p><p>Are you sure?</p><p>Maybe you think you should migrate it to a microservice-based architecture? After all, that&rsquo;s what all the cool kids are using these days, isn&rsquo;t it?</p><p>Before you do that, just stop and think a moment about what it is you actually need, and what problems you are trying to solve by considering what I presume would be a fairly major transformation project. Start by asking yourself a couple of questions:</p><h3 id=is-my-system-really-legacy>Is my system really legacy?</h3><p>There&rsquo;s a lot of confusion around as to what legacy actually means, and a lot of the time the word is thrown into the mix by architects, managers, CIOs, business folk and others that perhaps don&rsquo;t really understand what system they currently have. When this happens it is widely assumed that appending the label &ldquo;legacy&rdquo; to something will automatically make everybody assume it is bad, and something should be done about it immediately.</p><p>This is the first myth that comes from not understanding what &ldquo;legacy&rdquo; really means, so let&rsquo;s just be clear about what it doesn&rsquo;t mean.</p><p><strong><center style=font-size:150%>LEGACY ≠ &ldquo;BAD&rdquo;</center></strong></p><p>I mean, it can, sure. A legacy system can be a bad thing, but it doesn&rsquo;t have to be.</p><h3 id=so-what-do-we-mean-when-we-talk-about-legacy-systems>So what do we mean when we talk about legacy systems?</h3><p>A literal definition of &ldquo;legacy&rdquo; might be &ldquo;inherited&rdquo;. In the world of IT, this might mean it&rsquo;s an old system that was put in place by people that no longer work there.</p><p>OK, fine, but then how many systems in the world count as legacy then? Given the turnover rate of IT people, my guess would be most of them. This in itself is certainly not enough to brand a system as legacy, and certainly not enough to warrant dropping a lot of time, energy and cash on replacing it.</p><p>How about a less literal, and more useful definition?</p><blockquote><p>&ldquo;In computing, a legacy system is an old method, technology, computer system, or application
program, of, relating to, or being a previous or outdated computer system, yet still in use&rdquo;</p><p>&ndash; Wikipedia</p></blockquote><p>To take this further again, in his book <em>Working Effectively with Legacy Code</em>, Michael Feathers provides a more succinct definition, that is probably more useful for anybody in the real world.</p><blockquote><p>&ldquo;To me, legacy code is simply code without tests.&rdquo;</p><p>&ndash; Michael C. Feathers</p></blockquote><p>Let&rsquo;s take a look at some examples.</p><h4 id=example-1---inherited>Example 1 - &ldquo;Inherited&rdquo;</h4><p>A 7-year-old system written largely in Java. This was the baby of the CIO at the time. The company has gone through 2 more CIOs since then, a couple of CEOs, and there&rsquo;s nobody left in the IT department that worked on the original development, but it runs well and has pretty decent test coverage. When business come up with the occasional new requirement, there are enough Java coders at the company to handle it.</p><h4 id=example-2---old-tech>Example 2 - &ldquo;Old tech&rdquo;</h4><p>A 30-year-old backend system written in COBOL. At one point this was the entire CRM monolith, but some time back it was relegated to backend only, and simply manages data via APIs to more modern front-end systems. All the APIs have full test coverage, and there are even some unit tests floating around for a couple of the more complex areas. There is one COBOL programmer at the company that handles the very occasional change request.</p><h4 id=example-3---code-without-tests>Example 3 - &ldquo;Code without tests&rdquo;</h4><p>This is basically example 2, but without any tests. Perhaps it was never upgraded to be backend-only, and is still the primary CRM tool for the company? It works just fine, but people are afraid to touch it because they don&rsquo;t really understand it, and COBOL consultants are expensive these days!</p><p>I think we could probably all agree that <strong>Example 1</strong> isn&rsquo;t really a problem. There are no problems finding decent Java coders, it&rsquo;s not a problem implementing new requirements because there is decent test coverage. Perhaps you have a case where modernising your delivery pipelines may payoff - better CI/CD flows to automate the testing and deployment - if this is not already being done, but change the core system &mldr; why?</p><p>Looking at <strong>Example 2</strong> we can definitely see some issues, but not showstoppers. Changes can be made and tested, and new requirements can be handled. The only real issue is how long are you going to be able to keep that COBOL programmer on the team, and can you afford an expensive consultant if they leave?</p><p>Probably you want to start thinking about moving away from COBOL here, but exactly how urgent this is will depend on a whole load of other factors. Perhaps only small parts of this system need to be moved out, and the rest of the functionality will deprecate naturally over a span of 5-10 years? Think carefully about all the factors, costs and risks before moving ahead.</p><p>Now, onto <strong>Example 3</strong>. This is a clear example of a legacy codebase that you almost certainly need to do something with as soon as possible, but even this may not be sufficient to warrant throwing all that money at a giant transformation project. Perhaps getting this system to a similar state as <strong>Example 2</strong> would be enough for the moment?</p><p>Now, let&rsquo;s look at the question you should ask yourself about monoliths &mldr;</p><h3 id=why-do-i-want-something-other-than-a-monolith>Why do I want something other than a monolith?</h3><p>The answer to this appears to be self-evident to many, and the core driver for giving the go-ahead to a lot of large transformation projects - monoliths are bad, right?</p><p>Well, they can be, sure. But they&rsquo;re not bad just because they&rsquo;re monoliths!</p><p><strong><center style=font-size:150%>MONOLITH ≠ &ldquo;BAD&rdquo;</center></strong></p><p>To start with, there are many different types of monolith, some of which even resemble a more contained version of a microservice architecture. A well-designed modular monolith might be exactly what you need!
On the other hand, it seems that the words &ldquo;monolith&rdquo; and &ldquo;legacy&rdquo; are interchangeable, which I suspect is what leads to a lot of the
confusion.</p><p><strong><center style=font-size:150%>MONLITH ≠ LEGACY</center></strong></p><p>A monolithic system certainly <em>can</em> be a legacy system as well, but it doesn&rsquo;t have to be. If you have decent test coverage and the resources available to make changes, then your monolith is most likely not causing you any problems.</p><p>If, on the other hand, your monolith is <strong>a big ball of mud</strong>, then yes, this probably counts as legacy and you should be looking to do something about it. In this context, <strong>a big ball of mud</strong> refers to the fact that nobody has really understood the entire system for some time, so there is code duplication, data redundancy, giant processes that do 101 things that would be better split into smaller processes, and - of course - no real test suite to speak of.</p><p>This is a bad monolith, though - to reiterate - it&rsquo;s not bad because it&rsquo;s a monolith. It&rsquo;s bad because it turned into a <strong>legacy</strong> system by any definition of the word some time back, and now most people are terrified of touching it lest they break some core piece of functionality and cost the company a lot of money!</p><h3 id=ok-so-when-should-i-look-at-changing-things>OK, so when should I look at changing things?</h3><p>Good question! I think if all you&rsquo;re hearing from people is that:</p><ul><li><p>&ldquo;We need to get rid of this monolith!&rdquo;</p></li><li><p>&ldquo;We can&rsquo;t have a legacy system!&rdquo;</p></li><li><p>&ldquo;We need to use microservices - that&rsquo;s the modern solution!&rdquo;</p></li></ul><p>&mldr; then you should start questioning whether there&rsquo;s really an issue. Perhaps there is, but dig deeper and get the facts first before you throw a lot of money at it. If, on the other hand, you have problems with things like:</p><ul><li><p>Long delivery times for changes because everything needs testing by hand</p></li><li><p>Reluctance to change the system because everybody is frightened of breaking it</p></li><li><p>Difficulty finding resources to maintain the current system due to old tech, and the fact that a lot of people that can do it have actually retired years ago</p></li><li><p>Proprietary technology that comes with high licencing costs</p></li></ul><p>&mldr; <em>then</em> you might want to start looking into alternative solutions. Of course, this isn&rsquo;t a comprehensive list of the problems you might see, but it&rsquo;s certainly some of the most common ones, and if you have problems I&rsquo;d expect at least one or two of them to be on this list.</p><h3 id=i-think-we-need-to-change-what-should-we-do>I think we need to change, what should we do?</h3><p>If you think you have a need to modernise and you&rsquo;re wondering about this giant transformation budget that&rsquo;s just landed on your desk for approval, think about the following things before you sign off on any plan:</p><ul><li><p>Don&rsquo;t change based on the &ldquo;need&rdquo; to move to a modern architecture. Microservices are not a panacea, and will not help you just by being microservices. Consider alternatives, including the possibility of a new monolith.</p></li><li><p>Make sure you involve the people with the domain knowledge.</p></li><li><p>Get a clear understanding of the business processes you want to move out of the legacy system <em>before</em> attempting to move them.</p></li><li><p>Be careful working &ldquo;agile&rdquo; when building a new system from the ground up. Some things require a larger understanding of the whole if you don&rsquo;t want them to come back and bite you later.</p></li><li><p>Think about how quickly you want to move. What are the critical processes you should consider moving first? How much, if anything, could be left behind in the old system to die off naturally?</p></li><li><p>Could you give yourself some more time to deal with all this in a sensible way by spending a little money on the legacy system: putting some tests in place for core processes, building some new APIs that make it easier to cutover, tidying up some of the really messy code to break it into functions that better align with proposed service boundaries.</p></li></ul><h3 id=further-research>Further research</h3><p>I would highly recommend the following. The Michael Feathers book is an old one, but still relevant. The Sam Newman books are easy to understand and will give a good insight into the challenges for people at all levels of the organisation.</p><ul><li><a href=http://www.amazon.com/Working-Effectively-Legacy-Michael-Feathers/dp/0131177052>Working Effecively with Legacy Code</a>, Michael C. Feathers</li><li><a href=http://www.amazon.com/Building-Microservices-Designing-Fine-Grained-Systems/dp/1492034029>Building Microservices: Designing Fine-Grained Systems</a>, Sam Newman</li><li><a href=http://www.amazon.com/Monolith-Microservices-Evolutionary-Patterns-Transform/dp/1492047848>Monolith to Microservices: Evolutionary Patterns to Transform Your Monlith</a>, Sam Newman</li><li><a href=https://www.youtube.com/user/GotoConferences>GOTO Conferences</a>, YouTube</li></ul><p>Photo: <a href=https://timjarvis.com/portfolio/monoliths>Tim Jarvis</a></p></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/tech/2021/2021_02_25_remote_working/ title="Remote working is not a zero-sum game!" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Remote working is not a zero-sum game!</div></a></div><div class="col-md-6 next-article"><a href=/posts/writing/ title="Michael J. Nicholson - Posts on Writing" class="btn btn-outline-info"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Michael J. Nicholson - Posts on Writing</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=#is-my-system-really-legacy>Is my system really legacy?</a></li><li><a href=#so-what-do-we-mean-when-we-talk-about-legacy-systems>So what do we mean when we talk about legacy systems?</a></li><li><a href=#why-do-i-want-something-other-than-a-monolith>Why do I want something other than a monolith?</a></li><li><a href=#ok-so-when-should-i-look-at-changing-things>OK, so when should I look at changing things?</a></li><li><a href=#i-think-we-need-to-change-what-should-we-do>I think we need to change, what should we do?</a></li><li><a href=#further-research>Further research</a></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://michjnich.github.io#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://michjnich.github.io#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://michjnich.github.io#experiences>Experience</a></li><li class=nav-item><a class=smooth-scroll href=https://michjnich.github.io#projects>Projects</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:michjnich.com@outlook.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>michjnich.com@outlook.com</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2022 Copyright, Michael J. Nicholson</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>